self.addEventListener('install', function(e) {
  e.waitUntil(
    caches.open('survey-player').then(function(cache) {
      return cache.addAll([
        "/node_modules/jquery/dist/jquery.min.js",
        "/node_modules/angular/angular.min.js",
        "/node_modules/angular-ui-router/release/angular-ui-router.min.js",
        "/node_modules/angular-cookies/angular-cookies.min.js",
        "/node_modules/angular-material/angular-material.min.js",
        "/node_modules/angular-aria/angular-aria.min.js",
        "/node_modules/angular-animate/angular-animate.min.js",
        "/node_modules/angular-messages/angular-messages.min.js",
        "/node_modules/angular-resource/angular-resource.min.js",
        "/node_modules/lokijs/build/lokijs.min.js",
        "/node_modules/lokijs/build/loki-indexed-adapter.min.js",
        "/node_modules/lokijs/src/loki-angular.js",
        "/node_modules/alasql/dist/alasql.min.js",
        "/node_modules/angular-bind-html-compile-ci-dev/angular-bind-html-compile.js",
        "/node_modules/angular-mousewheel/mousewheel.js",
        "/node_modules/otus-model-js/dist/otus-model.js",
        "/node_modules/otus-model-js/dist/st-utils.min.js",
        "/node_modules/fuse.js/src/fuse.min.js",
        "/node_modules/otus-validation-js/dist/otus-validation-min.js",
        "/app.js",
        "/activity-rest-service.js",
        "/activity-collection-rest-service.js",
        "/activity-remote-storage-service.js",
        "/activity-collection-service.js",
        "/activity-repository-service.js",
        "/indexed-db-service.js",
        "/storage-loader-service.js",
        "/survey-player-api/survey-api-module.js",
        "/survey-player-api/survey-api-service.js",
        "/storage/storage-module.js",
        "/storage/activity-local-storage-service.js",
        "/storage/activity-indexed-db-storage-service.js",
        "/storage/collect-indexed-db-storage-service.js",
        "/data-source/datasource-module.js",
        "/data-source/datasource-resource-factory.js",
        "/data-source/survey-item-rest-service.js",
        "/data-source/survey-item-datasource-service.js",
        "/file-upload/file-upload-module.js",
        "/file-upload/upload-resource-factory.js",
        "/file-upload/file-upload-rest-service.js",
        "/file-upload/file-upload-datasource-service.js",
        "/static-variable/static-variable-module.js",
        "/static-variable/static-variable-resource-factory.js",
        "/static-variable/static-variable-rest-service.js",
        "/static-variable/static-variable-data-source-request-factory.js",
        "/static-variable/static-variable-data-source-service.js",
        "/config/otusjs-config-module.js",
        "/config/state-configuration.js",
        "/config/theme-configuration.js",
        "/config/locale-configuration.js",
        "/misc/otusjs-player-data-module.js",
        "/misc/fake-data-service.js",
        "/utils/connection-icon-component.js",
        "/utils/activity-status-constant.js",
        "/otusjs-player-viewer/otusjs-player-viewer-module.js",
        "/otusjs-player-viewer/sheet-view-controller.js",
        "/otusjs-player-viewer/loading-screen-service.js",
        "/survey-player-client/survey-player-client-module.js",
        "/survey-player-client/interceptor-factory.js",
        "/survey-player-client/survey-player-client-config.js",
        "/survey-player-client/survey-player-client-service.js",
        "/player-module.js",
        "/player/exit-player-step-service.js",
        "/player/pre-player-step-service.js",
        "/player/save-player-step-service.js",
        "/player/stop-player-step-service.js",
        "/player/player-service.js",
        "/otusjs-player-component/component-module.js",
        "/otusjs-player-component/question-icons/icon-constant.js",
        "/otusjs-player-component/comment/comment-component.js",
        "/otusjs-player-component/label/otus-label-component.js",
        "/otusjs-player-component/metadata/metadata-component.js",
        "/otusjs-player-component/player/player-component.js",
        "/otusjs-player-component/viewer/viewer-component.js",
        "/otusjs-player-component/viewer/filters/viewer-filters.js",
        "/otusjs-player-component/viewer/survey-item-views/survey-item-view-component.js",
        "/otusjs-player-component/viewer/survey-item-views/calendar-question-view-component.js",
        "/otusjs-player-component/viewer/survey-item-views/file-upload-question-view-component.js",
        "/otusjs-player-component/viewer/survey-item-views/question-view-component.js",
        "/otusjs-player-component/viewer/survey-item-views/checkbox-question-view-component.js",
        "/otusjs-player-component/viewer/survey-item-views/single-selection-question-view-component.js",
        "/otusjs-player-component/viewer/survey-item-views/grid-integer-question-view-component.js",
        "/otusjs-player-component/viewer/survey-item-views/grid-text-question-view-component.js",
        "/otusjs-player-component/viewer/survey-item-views/image-item-view-component.js",
        "/otusjs-player-component/viewer/survey-item-views/text-item-view-component.js",
        "/otusjs-player-component/viewer/survey-item-views/time-question-view-component.js",
        "/otusjs-player-component/static-variable/static-variable-component.js",
        "/otusjs-player-component/player-commander/player-commander-component.js",
        "/otusjs-player-component/player-display/player-display-component.js",
        "/otusjs-player-component/survey-back-cover/survey-back-cover-component.js",
        "/otusjs-player-component/survey-cover/survey-cover-component.js",
        "/otusjs-player-component/survey-header/survey-header-component.js",
        "/otusjs-player-component/survey-item/survey-item-component.js",
        "/otusjs-player-component/survey-item/question/question-component.js",
        "/otusjs-player-component/survey-item/question/calendar/calendar-question-component.js",
        "/otusjs-player-component/survey-item/question/calendar/calendar-question-view-component.js",
        "/otusjs-player-component/survey-item/question/integer/integer-question-component.js",
        "/otusjs-player-component/survey-item/question/integer/integer-question-view-component.js",
        "/otusjs-player-component/survey-item/question/integer/ui-integer-directive.js",
        "/otusjs-player-component/survey-item/question/decimal/decimal-question-component.js",
        "/otusjs-player-component/survey-item/question/decimal/decimal-question-view-component.js",
        "/otusjs-player-component/survey-item/question/single-selection/single-selection-question-component.js",
        "/otusjs-player-component/survey-item/question/single-selection/single-selection-question-view-component.js",
        "/otusjs-player-component/survey-item/question/checkbox/checkbox-question-component.js",
        "/otusjs-player-component/survey-item/question/checkbox/checkbox-question-view-component.js",
        "/otusjs-player-component/survey-item/question/text/text-question-component.js",
        "/otusjs-player-component/survey-item/question/text/text-question-view-component.js",
        "/otusjs-player-component/survey-item/question/email/email-question-component.js",
        "/otusjs-player-component/survey-item/question/email/email-question-view-component.js",
        "/otusjs-player-component/survey-item/question/time/time-question-component.js",
        "/otusjs-player-component/survey-item/question/time/time-question-view-component.js",
        "/otusjs-player-component/survey-item/question/phone/phone-question-component.js",
        "/otusjs-player-component/survey-item/question/phone/phone-question-view-component.js",
        "/otusjs-player-component/survey-item/question/file-upload/file-upload-question-component.js",
        "/otusjs-player-component/survey-item/question/file-upload/file-upload-question-view-component.js",
        "/otusjs-player-component/survey-item/question/autocomplete/autocomplete-question-component.js",
        "/otusjs-player-component/survey-item/question/autocomplete/autocomplete-question-view-component.js",
        "/otusjs-player-component/survey-item/question/grid-text/grid-text-question-component.js",
        "/otusjs-player-component/survey-item/question/grid-text/grid-text-question-view-component.js",
        "/otusjs-player-component/survey-item/question/grid-integer/grid-integer-question-component.js",
        "/otusjs-player-component/survey-item/question/grid-integer/grid-integer-question-view-component.js",
        "/otusjs-player-component/survey-item/question/grid-integer/numbers-only-directive.js",
        "/otusjs-player-component/survey-item/misc/misc-item-component.js",
        "/otusjs-player-component/survey-item/misc/image/image-item-component.js",
        "/otusjs-player-component/survey-item/misc/text/text-item-component.js",
        "/otusjs-player-component/validation-error/validation-error-component.js",
        "/otusjs-player-component/question-menu/question-menu-component.js",
        "/otusjs-player-component/answer-view/answer-view-component.js",
        "/otusjs-player-component/survey-list/survey-list-component.js",
        "/otusjs-player-component/activity-collect/activity-collect-component.js",
        "/otusjs-player-core/core-module.js",
        "/otusjs-player-core/phase/phase-module.js",
        "/otusjs-player-core/phase/action-pipe-service.js",
        "/otusjs-player-core/phase/ahead/ahead-action-service.js",
        "/otusjs-player-core/phase/ahead/execution-ahead-action-service.js",
        "/otusjs-player-core/phase/ahead/post-ahead-action-service.js",
        "/otusjs-player-core/phase/ahead/pre-ahead-action-service.js",
        "/otusjs-player-core/phase/back/back-action-service.js",
        "/otusjs-player-core/phase/back/execution-back-action-service.js",
        "/otusjs-player-core/phase/back/post-back-action-service.js",
        "/otusjs-player-core/phase/back/pre-back-action-service.js",
        "/otusjs-player-core/phase/eject/eject-action-service.js",
        "/otusjs-player-core/phase/eject/execution-eject-action-service.js",
        "/otusjs-player-core/phase/eject/post-eject-action-service.js",
        "/otusjs-player-core/phase/eject/pre-eject-action-service.js",
        "/otusjs-player-core/phase/play/play-action-service.js",
        "/otusjs-player-core/phase/play/execution-play-action-service.js",
        "/otusjs-player-core/phase/play/post-play-action-service.js",
        "/otusjs-player-core/phase/play/pre-play-action-service.js",
        "/otusjs-player-core/phase/save/save-action-service.js",
        "/otusjs-player-core/phase/save/execution-save-action-service.js",
        "/otusjs-player-core/phase/save/post-save-action-service.js",
        "/otusjs-player-core/phase/save/pre-save-action-service.js",
        "/otusjs-player-core/phase/start/execution-player-start-action-service.js",
        "/otusjs-player-core/phase/start/player-start-action-service.js",
        "/otusjs-player-core/phase/start/post-player-start-action-service.js",
        "/otusjs-player-core/phase/start/pre-player-start-action-service.js",
        "/otusjs-player-core/phase/stop/execution-stop-action-service.js",
        "/otusjs-player-core/phase/stop/stop-action-service.js",
        "/otusjs-player-core/phase/stop/post-stop-action-service.js",
        "/otusjs-player-core/phase/stop/pre-stop-action-service.js",
        "/otusjs-player-core/player/player-module.js",
        "/otusjs-player-core/player/player-configuration-service.js",
        "/otusjs-player-core/player/player-service.js",
        "/otusjs-player-core/renderer/renderer-module.js",
        "/otusjs-player-core/renderer/html-builder-service.js",
        "/otusjs-player-core/renderer/tag-component-builder-service.js",
        "/otusjs-player-core/scaffold/scaffold-module.js",
        "/otusjs-player-core/scaffold/chain-factory.js",
        "/otusjs-player-core/scaffold/chain-link-factory.js",
        "/otusjs-player-core/step/step-module.js",
        "/otusjs-player-core/step/survey/initialize-survey-activity-step-service.js",
        "/otusjs-player-core/step/survey/finalize-survey-activity-step-service.js",
        "/otusjs-player-core/step/survey/save-survey-activity-step-service.js",
        "/otusjs-player-core/step/survey/load-survey-activity-step-service.js",
        "/otusjs-player-core/step/survey/load-survey-activity-cover-step-service.js",
        "/otusjs-player-core/step/survey-item/load-next-item-step-service.js",
        "/otusjs-player-core/step/survey-item/load-previous-item-step-service.js",
        "/otusjs-player-core/step/survey-item/update-item-tracking-step-service.js",
        "/otusjs-player-core/step/survey-item-data/apply-answer-step-service.js",
        "/otusjs-player-core/step/survey-item-data/clear-skipped-answer-step-service.js",
        "/otusjs-player-core/step/survey-item-validation/handle-validation-error-step-service.js",
        "/otusjs-player-core/step/survey-item-validation/read-validation-error-step-service.js",
        "/otusjs-player-core/step/survey-item-validation/run-validation-step-service.js",
        "/otusjs-player-core/step/survey-item-validation/setup-validation-step-service.js",
        "/otusjs-player-data/data-module.js",
        "/otusjs-player-data/activity/activity-module.js",
        "/otusjs-player-data/activity/activity-facade-service.js",
        "/otusjs-player-data/activity/current-item-service.js",
        "/otusjs-player-data/activity/current-survey-service.js",
        "/otusjs-player-data/navigation/navigation-module.js",
        "/otusjs-player-data/navigation/navigation-service.js",
        "/otusjs-player-data/navigation/route-service.js",
        "/otusjs-player-data/navigation/rule-service.js",
        "/otusjs-player-data/viewer/viewer-module.js",
        "/otusjs-player-data/viewer/survey-viewer-model-factory.js",
        "/otusjs-player-data/validation/validation-module.js",
        "/otusjs-player-data/validation/item-filling-validator-service.js",
        "/otusjs-player-component/home/survey-player-home-component.js",
        "/node_modules/please-wait/build/please-wait.min.js",
        "/node_modules/trail-js/dist/trail-min.js",
        "/utils/login-service.js",
        "/index.html"
      ]);
    })
  );
});
//
// self.addEventListener('fetch', function(e) {
//   console.log(e.request.url);
//   e.respondWith(
//     caches.match(e.request).then(function(response) {
//       return response || fetch(e.request);
//     })
//   );
// });


self.addEventListener('fetch', function(event) {
  event.respondWith(
    caches.open('survey-player').then(function(cache) {
      return cache.match(event.request).then(function (response) {
        return response || fetch(event.request).then(function(response) {
          cache.put(event.request, response.clone());
          return response;
        });
      });
    })
  );
});